<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">

	<title>Pack that list!</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	 crossorigin="anonymous">
	<link rel="stylesheet" href="/css/style.css" type="text/css">
	<script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
	<!--<script src="/js/js.js"></script>-->
</head>

<body>

	<img src="/images/bag.png" id="bag-pic">
	<h1> Pack Your Stuff </h1>
	<input class="form-control" type="text" placeholder="Add to your list..." id="new-item-field">
	<input class="btn btn-primary" type="submit" value="Add" id="new-item-button"> {{{ body }}}

	<script>

		$(document).ready(function () {

			$("#new-item-button").on("click", function (event) {
				event.preventDefault();

				var thing_name = {
					thing_name: $("#new-item-field").val().trim()
				};
				console.log(thing_name);
				$.ajax("/api/list", {
					type: "POST",
					data: thing_name
				}).then(function () {
					console.log(thing_name + " added");
					location.reload();
				})
			});

			$(".pack-item-button").on("click", function () {
				event.preventDefault();

				var id = $(this).attr("id");
				console.log("update " + id);

				$.ajax("/api/list/" + id, {
					type: "PUT",
					data: id
				}).then(
					function () {
						console.log("item packed");
						location.reload();
					}
				);
			});

			$(".delete-item-button").on("click", function () {
				var id = $(this).attr("id");
				console.log("delete " + id);
				$.ajax("/api/list/" + id, {
					type: "DELETE"
				}).then(
					function () {
						console.log("Deleted item")
						location.reload();
					}
				);
			});

		});

	</script>
</body>

</html>